/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package vista.ejecucion.lanzamiento;

import javax.swing.JComboBox;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.TableColumn;
import javax.swing.table.TableColumnModel;
import vista.util.MyComboBoxEditor;

/**
 *
 * @author Administrador
 */
public class PanelMateriales extends javax.swing.JPanel {

    public static final int TABLA_MATERIALES_COLUMNA_NOMBRE = 0;
    public static final int TABLA_MATERIALES_COLUMNA_NECESARIOS = 1;
    public static final int TABLA_MATERIALES_COLUMNA_DISPONIBLES = 2;
    public static final int TABLA_MATERIALES_COLUMNA_ENSTOCK = 3;
    public static final int TABLA_MATERIALES_COLUMNA_ESTADO = 4;
    public static final int TABLA_MATERIALES_COLUMNA_SELECCION = 5;
    private static final int TABLA_DEFAULT_ALTO = 25;

    /**
     * Creates new form PanelMateriales
     */
    public PanelMateriales() {
        initComponents();
        initTabla();
        mock();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        tblMateriales = new javax.swing.JTable();
        btnGenerarOrdenDeCompra = new javax.swing.JButton();
        btnRecepcionCompras = new javax.swing.JButton();
        jButton1 = new javax.swing.JButton();

        tblMateriales.setModel(new javax.swing.table.DefaultTableModel(
            new Object [][] {

            },
            new String [] {
                "Nombre", "Necesarios", "Disponibles", "Stock", "Estado", "S"
            }
        ) {
            Class[] types = new Class [] {
                java.lang.Object.class, java.lang.Object.class, java.lang.Object.class, java.lang.Object.class, java.lang.Object.class, java.lang.Boolean.class
            };
            boolean[] canEdit = new boolean [] {
                false, false, false, false, true, true
            };

            public Class getColumnClass(int columnIndex) {
                return types [columnIndex];
            }

            public boolean isCellEditable(int rowIndex, int columnIndex) {
                return canEdit [columnIndex];
            }
        });
        jScrollPane1.setViewportView(tblMateriales);

        btnGenerarOrdenDeCompra.setIcon(new javax.swing.ImageIcon(getClass().getResource("/res/iconos/var/16x16/List.png"))); // NOI18N
        btnGenerarOrdenDeCompra.setText("Generar Orden de Compra");
        btnGenerarOrdenDeCompra.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnGenerarOrdenDeCompraActionPerformed(evt);
            }
        });

        btnRecepcionCompras.setIcon(new javax.swing.ImageIcon(getClass().getResource("/res/iconos/var/16x16/delivery.png"))); // NOI18N
        btnRecepcionCompras.setText("Recepción de Compras");
        btnRecepcionCompras.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnRecepcionComprasActionPerformed(evt);
            }
        });

        jButton1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/res/iconos/var/16x16/Wallet.png"))); // NOI18N
        jButton1.setText("Consultar Stock");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
        this.setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jScrollPane1)
            .addGroup(layout.createSequentialGroup()
                .addComponent(btnGenerarOrdenDeCompra)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnRecepcionCompras)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, 190, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jScrollPane1, javax.swing.GroupLayout.DEFAULT_SIZE, 335, Short.MAX_VALUE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnGenerarOrdenDeCompra)
                    .addComponent(btnRecepcionCompras)
                    .addComponent(jButton1)))
        );
    }// </editor-fold>//GEN-END:initComponents

    private void btnGenerarOrdenDeCompraActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnGenerarOrdenDeCompraActionPerformed
        // TODO
        mostrarMensaje(JOptionPane.INFORMATION_MESSAGE,"Info!","Con éste botón Genero una orden de compra de todos los items seleccionados\nHay que ver si usamos una ventana como la diseño emma en su momento\npara poder generar varias ordenes de una o como hacemos...\nLuego asigna la orden de compra a estos items de la Obra/a la obra en si dependiendo el caso para tener trazabilidad !! \n(Ya esta pensado en el HLD de compras)");        
    }//GEN-LAST:event_btnGenerarOrdenDeCompraActionPerformed

    private void btnRecepcionComprasActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRecepcionComprasActionPerformed
        // TODO
        mostrarMensaje(JOptionPane.INFORMATION_MESSAGE,"Info!","Solo habre la ventana de Recepcion de Recursos, nada más (Puede no ir) es solo propuesta");        
    }//GEN-LAST:event_btnRecepcionComprasActionPerformed

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
        // TODO
        mostrarMensaje(JOptionPane.INFORMATION_MESSAGE,"Info!","Abre la ventana para consulta el Stock de la Empresa...solo eso");                // TODO add your handling code here:
    }//GEN-LAST:event_jButton1ActionPerformed

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnGenerarOrdenDeCompra;
    private javax.swing.JButton btnRecepcionCompras;
    private javax.swing.JButton jButton1;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JTable tblMateriales;
    // End of variables declaration//GEN-END:variables

    private void initTabla() {
        tblMateriales.setRowHeight(TABLA_DEFAULT_ALTO);
        DefaultTableModel modelo = (DefaultTableModel) tblMateriales.getModel();

        TableColumn col = tblMateriales.getColumnModel().getColumn(TABLA_MATERIALES_COLUMNA_ESTADO);
        String[] values = new String[]{"<HTML><span color='#CC7A00'>En Espera</span>", "<HTML><span color='#009900'>Disponible</span>", "<HTML><span color='#CC0000'>No Disponible</span>"};
        col.setCellEditor(new MyComboBoxEditor(values));
        col.setCellRenderer(new PanelHerramientasCellRenderer(values));

        // Ancho de Columnas
        int anchoColumna = 0;
        TableColumnModel modeloColumna = tblMateriales.getColumnModel();
        TableColumn columnaTabla;
        for (int i = 0; i < tblMateriales.getColumnCount(); i++) {
            columnaTabla = modeloColumna.getColumn(i);
            switch (i) {
                case TABLA_MATERIALES_COLUMNA_ESTADO:
                    anchoColumna = 300;
                    break;
                case TABLA_MATERIALES_COLUMNA_NOMBRE:
                    anchoColumna = 500;
                    break;
                case TABLA_MATERIALES_COLUMNA_NECESARIOS:
                    anchoColumna = 100;
                    break;
                case TABLA_MATERIALES_COLUMNA_DISPONIBLES:
                    anchoColumna = 100;
                    break;
                case TABLA_MATERIALES_COLUMNA_ENSTOCK:
                    anchoColumna = 100;
                    break;
                case TABLA_MATERIALES_COLUMNA_SELECCION:
                    anchoColumna = 50;
                    break;
            }
            columnaTabla.setPreferredWidth(anchoColumna);
            columnaTabla.setWidth(anchoColumna);
        }
    }

    private void mock() {
        // TODO REMOVE
        DefaultTableModel modelo = (DefaultTableModel) tblMateriales.getModel();
        Object row[] = new Object[6];

        row[0] = "Hierro en V 3mm";
        row[1] = "12";
        row[2] = "2";
        row[3] = "2";
        row[4] = new JComboBox();
        row[5] = false;

        modelo.addRow(row);
    }
    
    /**
     * Muestra un mensaje
     * @param tipo
     * @param titulo
     * @param mensaje 
     */
    public void mostrarMensaje(int tipo,String titulo,String mensaje)
    {
         JOptionPane.showMessageDialog(this.getParent(),mensaje,titulo,tipo);
    }
}
